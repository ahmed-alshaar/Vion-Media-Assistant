<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Drive Mode — Drivemode</title>

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            'vion-dark':'#0a0b0d','vion-slate':'#1a1d23','vion-gray':'#2a2f36',
            'vion-blue':'#00d4ff','vion-green':'#00ff88','vion-orange':'#ff6b35'
          },
          fontFamily:{ orbitron:['Orbitron','sans-serif'], inter:['Inter','sans-serif'] }
        }
      }
    }
  </script>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700;800&family=Inter:wght@400;600&display=swap" rel="stylesheet">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js" crossorigin="anonymous"></script>

  <style>
    ::-webkit-scrollbar{display:none}
    .vehicle-3d{perspective:1000px;transform-style:preserve-3d}
    .vehicle-body{transition:all .8s cubic-bezier(.25,.46,.45,.94)}
    .eco-stance{transform:rotateX(2deg) translateY(5px)}
    .normal-stance{transform:rotateX(0) translateY(0)}
    .sport-stance{transform:rotateX(-2deg) translateY(-5px)}
    .mode-glow-eco{filter:drop-shadow(0 0 30px rgba(0,255,136,.6))}
    .mode-glow-normal{filter:drop-shadow(0 0 30px rgba(0,212,255,.6))}
    .mode-glow-sport{filter:drop-shadow(0 0 30px rgba(255,107,53,.6))}
    .mode-transition{animation:modeSwitch 1.2s ease-in-out}
    @keyframes modeSwitch{0%{transform:scale(1) rotateY(0)}50%{transform:scale(1.05) rotateY(5deg)}100%{transform:scale(1) rotateY(0)}}
    .pulse-ring{animation:pulse 2s cubic-bezier(.455,.03,.515,.955) infinite}
    @keyframes pulse{0%{transform:scale(.8);opacity:.4}100%{transform:scale(1.2);opacity:0}}
    .radial-panel{background:radial-gradient(60% 60% at 50% 40%, rgba(26,29,35,.35), rgba(26,29,35,0) 70%)}
    @media (prefers-reduced-motion: reduce){.mode-transition,.pulse-ring{animation:none!important}.vehicle-body{transition:none!important}}
  </style>
</head>
<body class="bg-vion-dark text-white font-inter">
  <!-- Safelist for CDN dynamic classes -->
  <div class="hidden">text-vion-blue text-vion-green text-vion-orange border-vion-blue border-vion-green border-vion-orange bg-vion-blue/20 bg-vion-green/20 bg-vion-orange/20</div>

  <div class="h-screen w-screen grid grid-cols-[20rem_1fr_20rem]">
    <!-- Left -->
    <aside class="bg-gradient-to-b from-vion-slate to-vion-gray p-6 flex flex-col gap-6">
      <div class="flex items-center justify-between">
        <h2 class="text-lg font-orbitron text-gray-300">VION</h2>
        <button class="text-gray-400 hover:text-white" aria-label="Back"><i class="fa-solid fa-arrow-left"></i></button>
      </div>

      <!-- Active mode card -->
      <div id="active-card" class="bg-vion-dark/50 rounded-2xl p-6">
        <div class="flex items-center justify-between mb-3">
          <span class="text-xs font-medium text-gray-400">ACTIVE MODE</span>
          <span id="active-dot" class="w-2.5 h-2.5 rounded-full bg-vion-blue"></span>
        </div>
        <div id="active-title" class="font-orbitron font-extrabold text-vion-blue" style="font-size:clamp(20px,2.6vw,28px)">NORMAL</div>
        <p id="active-sub" class="text-sm text-gray-400 mt-1">Balanced performance</p>
        <p id="active-eff" class="text-xs text-vion-green mt-3">Efficiency: 87%</p>
      </div>

      <!-- Mode buttons -->
      <div id="mode-buttons" class="flex flex-col gap-3">
        <button id="eco-btn" class="w-full bg-vion-dark/30 hover:bg-vion-green/20 border border-vion-gray hover:border-vion-green rounded-2xl p-4 text-left outline-none focus:ring-2 focus:ring-vion-green" aria-pressed="false">
          <div class="flex items-center justify-between">
            <div>
              <div class="text-lg font-orbitron font-bold text-vion-green">ECO</div>
              <div class="text-xs text-gray-400">Maximum efficiency</div>
            </div>
            <i class="fa-solid fa-leaf text-vion-green text-xl"></i>
          </div>
        </button>

        <button id="normal-btn" class="w-full bg-vion-blue/20 border-2 border-vion-blue rounded-2xl p-4 text-left outline-none focus:ring-2 focus:ring-vion-blue" aria-pressed="true">
          <div class="flex items-center justify-between">
            <div>
              <div class="text-lg font-orbitron font-bold text-vion-blue">NORMAL</div>
              <div class="text-xs text-gray-400">Balanced driving</div>
            </div>
            <i class="fa-solid fa-gauge text-vion-blue text-xl"></i>
          </div>
        </button>

        <button id="sport-btn" class="w-full bg-vion-dark/30 hover:bg-vion-orange/20 border border-vion-gray hover:border-vion-orange rounded-2xl p-4 text-left outline-none focus:ring-2 focus:ring-vion-orange" aria-pressed="false">
          <div class="flex items-center justify-between">
            <div>
              <div class="text-lg font-orbitron font-bold text-vion-orange">SPORT</div>
              <div class="text-xs text-gray-400">Maximum performance</div>
            </div>
            <i class="fa-solid fa-bolt text-vion-orange text-xl"></i>
          </div>
        </button>
      </div>

      <!-- Quick stats -->
      <div class="mt-auto space-y-2">
        <div class="flex items-center justify-between text-sm"><span class="text-gray-400">Range impact</span><span id="range-impact" class="text-vion-blue">0%</span></div>
        <div class="flex items-center justify-between text-sm"><span class="text-gray-400">Performance</span><span id="perf-percent" class="text-vion-blue">100%</span></div>
      </div>
    </aside>

    <!-- Center -->
    <main class="radial-panel relative flex flex-col items-center justify-center px-6">
      <!-- Vehicle block (extra bottom padding prevents overlap) -->
      <div class="relative vehicle-3d pb-14">
        <div id="vehicle-body" class="vehicle-body normal-stance mode-glow-normal relative z-10">
          <div class="w-[26rem] h-64 relative mx-auto max-w-full">
            <!-- Body -->
            <div class="absolute inset-0 bg-gradient-to-b from-gray-300 to-gray-600 rounded-t-[120px] rounded-b-[20px] shadow-2xl">
              <div class="absolute top-8 left-12 right-12 h-20 bg-gradient-to-b from-vion-blue/30 to-vion-blue/10 rounded-t-[80px] border border-vion-blue/20"></div>
              <div class="absolute top-4 left-8 w-8 h-4 bg-white rounded-full shadow-lg"></div>
              <div class="absolute top-4 right-8 w-8 h-4 bg-white rounded-full shadow-lg"></div>
              <div class="absolute top-12 left-4 w-16 h-12 bg-vion-blue/20 rounded-lg border border-vion-blue/30"></div>
              <div class="absolute top-12 right-4 w-16 h-12 bg-vion-blue/20 rounded-lg border border-vion-blue/30"></div>
              <div class="absolute top-16 left-0 right-0 h-px bg-gradient-to-r from-transparent via-gray-400 to-transparent"></div>
            </div>
            <!-- Wheels -->
            <div class="absolute -bottom-4 left-16 w-16 h-16 bg-gradient-to-b from-gray-800 to-black rounded-full border-4 border-gray-600">
              <div class="w-full h-full bg-gradient-to-br from-gray-700 to-gray-900 rounded-full flex items-center justify-center">
                <div class="w-6 h-6 bg-vion-blue rounded-full"></div>
              </div>
            </div>
            <div class="absolute -bottom-4 right-16 w-16 h-16 bg-gradient-to-b from-gray-800 to-black rounded-full border-4 border-gray-600">
              <div class="w-full h-full bg-gradient-to-br from-gray-700 to-gray-900 rounded-full flex items-center justify-center">
                <div class="w-6 h-6 bg-vion-blue rounded-full"></div>
              </div>
            </div>
          </div>
        </div>

        <!-- Mode ring under car -->
        <div id="mode-ring" class="absolute inset-0 w-[26rem] h-64 border-2 border-vion-blue rounded-full pulse-ring opacity-40 mx-auto left-1/2 -translate-x-1/2 z-0 pointer-events-none"></div>
      </div>

      <!-- Mode description card (glass, no overlap) -->
      <div id="mode-description" class="mt-2 px-5 py-4 rounded-2xl bg-white/5 backdrop-blur-md border border-white/10 text-center max-w-xl">
        <div class="font-orbitron font-extrabold text-vion-blue" style="font-size:clamp(18px,2.2vw,24px)">NORMAL MODE</div>
        <p class="text-sm text-gray-400 mt-1">Perfect balance between performance and efficiency for everyday driving</p>
      </div>

      <!-- Performance bars (flow below, never absolute) -->
      <div class="mt-6 flex items-end justify-center gap-10">
        <div class="text-center">
          <div class="text-xs text-gray-400 mb-2">POWER</div>
          <div class="w-2 h-20 bg-vion-gray rounded-full overflow-hidden">
            <div id="power-bar" class="w-full bg-gradient-to-t from-vion-blue to-vion-blue/50 rounded-full transition-all duration-[600ms]" style="height:60%"></div>
          </div>
        </div>
        <div class="text-center">
          <div class="text-xs text-gray-400 mb-2">EFFICIENCY</div>
          <div class="w-2 h-20 bg-vion-gray rounded-full overflow-hidden">
            <div id="efficiency-bar" class="w-full bg-gradient-to-t from-vion-green to-vion-green/50 rounded-full transition-all duration-[600ms]" style="height:80%"></div>
          </div>
        </div>
        <div class="text-center">
          <div class="text-xs text-gray-400 mb-2">COMFORT</div>
          <div class="w-2 h-20 bg-vion-gray rounded-full overflow-hidden">
            <div id="comfort-bar" class="w-full bg-gradient-to-t from-vion-orange to-vion-orange/50 rounded-full transition-all duration-[600ms]" style="height:70%"></div>
          </div>
        </div>
      </div>
    </main>

    <!-- Right -->
    <aside class="bg-gradient-to-b from-vion-slate to-vion-gray p-6 flex flex-col justify-between">
      <div class="space-y-6">
        <div class="flex items-center justify-between">
          <h2 class="text-lg font-orbitron text-gray-300">PERFORMANCE</h2>
          <i class="fa-solid fa-chart-line text-vion-blue"></i>
        </div>

        <div id="acceleration-stat" class="bg-vion-dark/50 rounded-2xl p-6">
          <div class="flex items-center justify-between mb-3">
            <span class="text-sm text-gray-400">0–100 KM/H</span>
            <i class="fa-solid fa-rocket text-vion-blue"></i>
          </div>
          <div class="text-3xl font-orbitron font-bold">7.2</div>
          <div class="text-sm text-gray-400">seconds</div>
        </div>

        <div id="top-speed-stat" class="bg-vion-dark/50 rounded-2xl p-6">
          <div class="flex items-center justify-between mb-3">
            <span class="text-sm text-gray-400">TOP SPEED</span>
            <i class="fa-solid fa-gauge-high text-vion-orange"></i>
          </div>
          <div class="text-3xl font-orbitron font-bold">180</div>
          <div class="text-sm text-gray-400">km/h</div>
        </div>

        <div id="energy-consumption" class="bg-vion-dark/50 rounded-2xl p-6">
          <div class="flex items-center justify-between mb-3">
            <span class="text-sm text-gray-400">CONSUMPTION</span>
            <i class="fa-solid fa-battery-half text-vion-green"></i>
          </div>
          <div class="text-2xl font-orbitron font-bold">15.2</div>
          <div class="text-sm text-gray-400">kWh/100km</div>
        </div>

        <div id="regen-braking" class="bg-vion-dark/50 rounded-2xl p-6">
          <div class="flex items-center justify-between mb-3">
            <span class="text-sm text-gray-400">REGEN LEVEL</span>
            <i class="fa-solid fa-recycle text-vion-green"></i>
          </div>
          <div class="flex items-center gap-2">
            <div class="flex gap-1">
              <div class="w-3 h-6 bg-vion-green rounded"></div>
              <div class="w-3 h-6 bg-vion-green rounded"></div>
              <div class="w-3 h-6 bg-vion-gray rounded"></div>
              <div class="w-3 h-6 bg-vion-gray rounded"></div>
            </div>
            <span id="regen-label" class="text-sm font-medium">Medium</span>
          </div>
        </div>
      </div>

      <div class="space-y-3">
        <button id="apply-mode" class="w-full bg-gradient-to-r from-vion-blue to-vion-blue/80 hover:from-vion-blue/80 hover:to-vion-blue rounded-2xl p-4 font-orbitron font-bold transition-all duration-300 hover:scale-105">
          APPLY MODE
        </button>
        <p class="text-xs text-gray-500 text-center">Changes take effect immediately</p>
      </div>
    </aside>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const vehicleBody = document.getElementById('vehicle-body');
      const modeRing = document.getElementById('mode-ring');
      const powerBar = document.getElementById('power-bar');
      const efficiencyBar = document.getElementById('efficiency-bar');
      const comfortBar = document.getElementById('comfort-bar');

      const ecoBtn = document.getElementById('eco-btn');
      const normalBtn = document.getElementById('normal-btn');
      const sportBtn = document.getElementById('sport-btn');

      const activeTitle = document.getElementById('active-title');
      const activeSub = document.getElementById('active-sub');
      const activeEff = document.getElementById('active-eff');
      const activeDot = document.getElementById('active-dot');
      const rangeImpact = document.getElementById('range-impact');
      const perfPercent = document.getElementById('perf-percent');

      const modes = {
        eco:{ stance:'eco-stance', glow:'mode-glow-eco', ring:'border-vion-green',
          power:'30%', efficiency:'95%', comfort:'85%',
          title:'ECO MODE', sub:'Maximum efficiency',
          color:'vion-green', accel:'9.8', top:'140', cons:'11.8',
          range:'+15%', perf:'70%', ambient:'via-vion-green' },
        normal:{ stance:'normal-stance', glow:'mode-glow-normal', ring:'border-vion-blue',
          power:'60%', efficiency:'80%', comfort:'90%',
          title:'NORMAL MODE', sub:'Balanced performance',
          color:'vion-blue', accel:'7.2', top:'180', cons:'15.2',
          range:'0%', perf:'100%', ambient:'via-vion-blue' },
        sport:{ stance:'sport-stance', glow:'mode-glow-sport', ring:'border-vion-orange',
          power:'100%', efficiency:'65%', comfort:'75%',
          title:'SPORT MODE', sub:'Maximum performance',
          color:'vion-orange', accel:'5.8', top:'220', cons:'22.4',
          range:'-12%', perf:'120%', ambient:'via-vion-orange' }
      };

      let current = 'normal';

      function resetButtons(){
        [ecoBtn,normalBtn,sportBtn].forEach(btn=>{
          btn.setAttribute('aria-pressed','false');
          btn.classList.remove('bg-vion-green/20','border-vion-green','bg-vion-blue/20','border-vion-blue','bg-vion-orange/20','border-vion-orange');
          btn.classList.add('bg-vion-dark/30','border-vion-gray');
        });
      }
      function activateButton(mode){
        const map={eco:['bg-vion-green/20','border-vion-green'],normal:['bg-vion-blue/20','border-vion-blue'],sport:['bg-vion-orange/20','border-vion-orange']};
        const btn=document.getElementById(`${mode}-btn`);
        btn.setAttribute('aria-pressed','true');
        btn.classList.remove('bg-vion-dark/30','border-vion-gray');
        btn.classList.add(...map[mode]);
      }

      function switchMode(mode){
        if(mode===current) return;
        const old=modes[current], m=modes[mode];

        vehicleBody.classList.remove(old.stance,old.glow);
        modeRing.classList.remove(old.ring);
        vehicleBody.classList.add('mode-transition');

        setTimeout(()=>{
          vehicleBody.classList.add(m.stance,m.glow);
          modeRing.classList.add(m.ring);

          powerBar.style.height=m.power;
          efficiencyBar.style.height=m.efficiency;
          comfortBar.style.height=m.comfort;

          document.querySelector('#acceleration-stat .font-orbitron').textContent=m.accel;
          document.querySelector('#top-speed-stat .font-orbitron').textContent=m.top;
          document.querySelector('#energy-consumption .font-orbitron').textContent=m.cons;

          // Mode title/desc card
          const titleEl = document.createElement('div');
          titleEl.className = `font-orbitron font-extrabold text-${m.color}`;
          titleEl.style.fontSize = 'clamp(18px,2.2vw,24px)';
          titleEl.textContent = m.title;

          const descEl = document.createElement('p');
          descEl.className = 'text-sm text-gray-400 mt-1';
          descEl.textContent =
            (mode==='eco') ? 'Maximum efficiency mode for extended range and eco-friendly driving' :
            (mode==='sport') ? 'Maximum performance mode for dynamic driving' :
            'Perfect balance between performance and efficiency for everyday driving';

          const modeDesc = document.getElementById('mode-description');
          modeDesc.innerHTML = '';
          modeDesc.appendChild(titleEl);
          modeDesc.appendChild(descEl);

          // Left active card
          activeTitle.className=`font-orbitron font-extrabold text-${m.color}`;
          activeTitle.style.fontSize='clamp(20px,2.6vw,28px)';
          activeTitle.textContent=mode.toUpperCase();
          activeSub.textContent=m.sub;
          activeEff.textContent=`Efficiency: ${m.efficiency}`;
          activeDot.className=`w-2.5 h-2.5 rounded-full bg-${m.color}`;
          rangeImpact.textContent=m.range;
          perfPercent.textContent=m.perf;

          resetButtons(); activateButton(mode);
          vehicleBody.classList.remove('mode-transition');
        },300);

        current=mode;
      }

      ecoBtn.addEventListener('click',()=>switchMode('eco'));
      normalBtn.addEventListener('click',()=>switchMode('normal'));
      sportBtn.addEventListener('click',()=>switchMode('sport'));

      window.addEventListener('keydown',e=>{
        if(e.key==='1') switchMode('eco');
        if(e.key==='2') switchMode('normal');
        if(e.key==='3') switchMode('sport');
      });

      document.getElementById('apply-mode').addEventListener('click',function(){
        this.innerHTML='<i class="fa-solid fa-check mr-2"></i>APPLIED';
        this.classList.add('bg-vion-green','hover:bg-vion-green');
        setTimeout(()=>{ this.innerHTML='APPLY MODE'; this.classList.remove('bg-vion-green','hover:bg-vion-green'); },1800);
      });
    });
  </script>
</body>
</html>
